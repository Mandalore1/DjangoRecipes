{% extends "base.html" %}
{% load static %}

{% block title %}{{ recipe.title }}{% endblock title %}
{% block h1 %}{{ recipe.title }}{% endblock h1 %}

{% block content %}
<div class="mb-3">
    <strong>Создан: </strong>{{ recipe.created_at|date }} |
    <strong>Обновлен: </strong>{{ recipe.updated_at|date }}
</div>
<div class="mb-3">
    <strong>Автор: </strong><a class="link link-primary" href="{% url 'user_info' recipe.user.username %}">{{ recipe.user.username }}</a>
</div>
{% if recipe.description %}
<p class="mb-3">
    {{ recipe.description }}
</p>
{% endif %}
<section class="row">
    <div class="col-lg-4">
        {% if recipe.image %}
        <img class="img-fluid rounded-start mx-auto d-block" src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
        {% else %}
        <img class="img-fluid rounded-start mx-auto d-block" src="{% static 'img/recipe-placeholder.png' %}"
             alt="{{ recipe.title }}">
        {% endif %}
    </div>
    <div class="col-lg-6">
        <h2>Ингредиенты:</h2>
        {% for ingredient in ingredients %}
        <p>{{ ingredient.ingredient.name }} - {{ ingredient.quantity }} {{ ingredient.unit }}</p>
        {% endfor %}
    </div>

    <div>
    <h2>Рецепт:</h2>
    <p>{{ recipe.content|safe }}</p>
    </div>
</section>
{% if recipe.user == request.user %}
{% if not recipe.is_published %}
<p class="mt-3">Рецепт еще не опубликован. <a href="{% url 'recipe_publish' recipe.pk %}">Опубликовать</a></p>
{% endif %}
<a href="{% url 'recipe_update' recipe.pk %}" class="btn btn-primary mt-3">Изменить рецепт</a>
<a href="{% url 'recipe_delete' recipe.pk %}" class="btn btn-danger mt-3">Удалить рецепт</a>
{% endif %}
{% endblock content %}